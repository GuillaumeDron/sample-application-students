language: java
jdk: oraclejdk8

# Define the services to use
services:
  - docker

before_install:
  - sudo service mysql stop
  - docker pull takimatraining/devops-training-db
  - docker run -d -p 127.0.0.1:3306:3306 takimatraining/devops-training-db

# Run Unit Test and Integration Tests
script:
  - |
    mvn clean install sonar:sonar \
    -Dsonar.projectKey=GuillaumeDron_sample-application-students \
    -Dsonar.organization=guillaumedron-github \
    -Dsonar.host.url=https://sonarcloud.io \
    -Dsonar.login=$SONAR_TOKEN

# Cache the .m2 folder to prevent redownloading dependencies on each build
cache:
  directories:
  - "$HOME/.m2/repository"

# Environment variables are strings (double quotes)
# Example:
# - secure: "DpR1th9rZvLMX0......"
env:
  global:
    - secure: "VfCIvK1FNlIqT7uNvSBu3GXoNty7pQ1cLYlbynTvileSzwTrQzfu5tIOIMDaDGMdKxzdJk3ClyjaXZyznnghQHnxE1vm2d/v5zSUsPDyY/Q0piSKAgZh9ilDzWk12M9smFDbyi29F1j3YCyobw/9EgSK4ePP5q7uqLkXODOPh8bs14QQAUmq7D7IJwaXGKiGSrJY1KAVyQlCrld+KENa8xKVpVWN5B1t3kCwwwIFjJ/GLdbN7whbCm0kQiu8DysTTaY61iHYXvBgYn/cxwmb47jUTa+681OD0Gq3TqmsXK7fmVICojxq13jVy9SLdKx3lTIZccKyfzPPPcSkqU+bcmrCBeO00Fby824VkQ/0wwElgAmS+Npy7cBQ0YWpkOS7TnEpN0xnzVqqhO6kJ/JgtYelEO0VCzf+tds4/T/xo84WPPrrWtWTNByj/GOlgYMmgIwRYti4UODVt01Ra8ts90B1fK1gkWJsqRXM2686eRvo4BcgVn+juCgRxL5NG+pUyec0iMU3YDgw/Lnoxf9nlzXbqnvNf8/T60vs/K6rNASoXByhb4BIRl1DkvhSxTDzoqx8Fzlolhr7E9036g+vxljiMWZSxgszrTdIAF2UiL9YoQVLRyoUtsbSBE0mvOgSXMRFq6NQyNuQ5J1tA9ya7KRraVQ9TF42nJW+C47/6po="



